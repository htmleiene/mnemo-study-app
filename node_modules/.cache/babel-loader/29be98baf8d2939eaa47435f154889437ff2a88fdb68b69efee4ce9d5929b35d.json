{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\5019508\\\\Documents\\\\dev\\\\Mnemo\\\\src\\\\pages\\\\Study\\\\StudyPage.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { getDeckFlashcards, updateFlashcardDifficulty } from '../../services/flashcards';\nimport Flashcard from '../../components/Flashcard/FlashCard';\nimport { generateFlashcards } from '../../services/aiService';\nimport { useAuth } from '../../contexts/AuthContext';\nimport './StudyPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StudyPage = () => {\n  _s();\n  const {\n    deckId\n  } = useParams();\n  const {\n    currentUser\n  } = useAuth();\n  const [flashcards, setFlashcards] = useState([]);\n  const [currentCardIndex, setCurrentCardIndex] = useState(0);\n  const [isLoading, setIsLoading] = useState(true);\n  useEffect(() => {\n    const loadDeck = async () => {\n      setIsLoading(true);\n      let deckFlashcards = await getDeckFlashcards(deckId);\n      if (!deckFlashcards || deckFlashcards.length === 0) {\n        // Gerar via IA se deck estiver vazio\n        const course = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.course) || 'Curso genérico';\n        const topics = ['Introdução', 'Tema 1', 'Tema 2']; // ou tornar dinâmico no futuro\n\n        deckFlashcards = await generateFlashcards(course, topics);\n      }\n\n      // Ordenar por próxima revisão\n      deckFlashcards.sort((a, b) => new Date(a.nextReview) - new Date(b.nextReview));\n      setFlashcards(deckFlashcards);\n      setIsLoading(false);\n    };\n    loadDeck();\n  }, [deckId, currentUser]);\n  const handleRateCard = difficulty => {\n    const currentCard = flashcards[currentCardIndex];\n    updateFlashcardDifficulty(currentCard.id, difficulty);\n    setCurrentCardIndex(prevIndex => prevIndex < flashcards.length - 1 ? prevIndex + 1 : 0);\n  };\n  if (isLoading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading\",\n    children: \"Carregando flashcards...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 25\n  }, this);\n  if (flashcards.length === 0) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"empty-deck\",\n    children: \"Nenhum flashcard neste deck ainda.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 39\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"study-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"progress-indicator\",\n      children: [\"Card \", currentCardIndex + 1, \" de \", flashcards.length]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Flashcard, {\n      front: flashcards[currentCardIndex].front,\n      back: flashcards[currentCardIndex].back,\n      onRate: handleRateCard,\n      currentDeck: deckId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n_s(StudyPage, \"xzxTLGaw4/GPe8amKharvJNwFVk=\", false, function () {\n  return [useParams, useAuth];\n});\n_c = StudyPage;\nexport default StudyPage;\nuseEffect(() => {\n  const loadDeck = async () => {\n    setIsLoading(true);\n    let deckFlashcards = await getDeckFlashcards(deckId);\n    if (!deckFlashcards || deckFlashcards.length === 0) {\n      var _currentUser;\n      const course = ((_currentUser = currentUser) === null || _currentUser === void 0 ? void 0 : _currentUser.course) || 'Curso genérico';\n      const topics = ['Introdução', 'Tema 1', 'Tema 2']; // Pode vir da API ou ser dinâmico\n      deckFlashcards = await generateFlashcards(course, topics);\n    }\n    deckFlashcards.sort((a, b) => new Date(a.nextReview) - new Date(b.nextReview));\n    setFlashcards(deckFlashcards);\n    setIsLoading(false);\n  };\n  loadDeck();\n}, [deckId]);\nvar _c;\n$RefreshReg$(_c, \"StudyPage\");","map":{"version":3,"names":["useState","useEffect","useParams","getDeckFlashcards","updateFlashcardDifficulty","Flashcard","generateFlashcards","useAuth","jsxDEV","_jsxDEV","StudyPage","_s","deckId","currentUser","flashcards","setFlashcards","currentCardIndex","setCurrentCardIndex","isLoading","setIsLoading","loadDeck","deckFlashcards","length","course","topics","sort","a","b","Date","nextReview","handleRateCard","difficulty","currentCard","id","prevIndex","className","children","fileName","_jsxFileName","lineNumber","columnNumber","front","back","onRate","currentDeck","_c","_currentUser","$RefreshReg$"],"sources":["C:/Users/5019508/Documents/dev/Mnemo/src/pages/Study/StudyPage.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { getDeckFlashcards, updateFlashcardDifficulty } from '../../services/flashcards';\r\nimport Flashcard from '../../components/Flashcard/FlashCard';\r\nimport { generateFlashcards } from '../../services/aiService';\r\nimport { useAuth } from '../../contexts/AuthContext'; \r\nimport './StudyPage.css';\r\n\r\nconst StudyPage = () => {\r\n  const { deckId } = useParams();\r\n  const { currentUser } = useAuth();\r\n  const [flashcards, setFlashcards] = useState([]);\r\n  const [currentCardIndex, setCurrentCardIndex] = useState(0);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const loadDeck = async () => {\r\n      setIsLoading(true);\r\n\r\n      let deckFlashcards = await getDeckFlashcards(deckId);\r\n\r\n      if (!deckFlashcards || deckFlashcards.length === 0) {\r\n        // Gerar via IA se deck estiver vazio\r\n        const course = currentUser?.course || 'Curso genérico';\r\n        const topics = ['Introdução', 'Tema 1', 'Tema 2']; // ou tornar dinâmico no futuro\r\n\r\n        deckFlashcards = await generateFlashcards(course, topics);\r\n      }\r\n\r\n      // Ordenar por próxima revisão\r\n      deckFlashcards.sort((a, b) => new Date(a.nextReview) - new Date(b.nextReview));\r\n\r\n      setFlashcards(deckFlashcards);\r\n      setIsLoading(false);\r\n    };\r\n\r\n    loadDeck();\r\n  }, [deckId, currentUser]);\r\n\r\n  const handleRateCard = (difficulty) => {\r\n    const currentCard = flashcards[currentCardIndex];\r\n    updateFlashcardDifficulty(currentCard.id, difficulty);\r\n\r\n    setCurrentCardIndex((prevIndex) =>\r\n      prevIndex < flashcards.length - 1 ? prevIndex + 1 : 0\r\n    );\r\n  };\r\n\r\n  if (isLoading) return <div className=\"loading\">Carregando flashcards...</div>;\r\n  if (flashcards.length === 0) return <div className=\"empty-deck\">Nenhum flashcard neste deck ainda.</div>;\r\n\r\n  return (\r\n    <div className=\"study-page\">\r\n      <div className=\"progress-indicator\">\r\n        Card {currentCardIndex + 1} de {flashcards.length}\r\n      </div>\r\n\r\n      <Flashcard\r\n        front={flashcards[currentCardIndex].front}\r\n        back={flashcards[currentCardIndex].back}\r\n        onRate={handleRateCard}\r\n        currentDeck={deckId}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StudyPage;\r\nuseEffect(() => {\r\n  const loadDeck = async () => {\r\n    setIsLoading(true);\r\n\r\n    let deckFlashcards = await getDeckFlashcards(deckId);\r\n\r\n    if (!deckFlashcards || deckFlashcards.length === 0) {\r\n      const course = currentUser?.course || 'Curso genérico';\r\n      const topics = ['Introdução', 'Tema 1', 'Tema 2']; // Pode vir da API ou ser dinâmico\r\n      deckFlashcards = await generateFlashcards(course, topics);\r\n    }\r\n\r\n    deckFlashcards.sort((a, b) => new Date(a.nextReview) - new Date(b.nextReview));\r\n    setFlashcards(deckFlashcards);\r\n    setIsLoading(false);\r\n  };\r\n\r\n  loadDeck();\r\n}, [deckId]);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}